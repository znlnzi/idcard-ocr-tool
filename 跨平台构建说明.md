# åœ¨macOSä¸Šç”ŸæˆWindows EXEæ–‡ä»¶çš„å®Œæ•´æ–¹æ¡ˆ

## ğŸ“‹ æ¦‚è¿°

æœ¬æ–‡æ¡£æä¾›äº†åœ¨macOSç³»ç»Ÿä¸Šç”ŸæˆWindowså¯æ‰§è¡ŒEXEæ–‡ä»¶çš„å¤šç§æ–¹æ¡ˆã€‚æ¯ç§æ–¹æ¡ˆéƒ½æœ‰å…¶é€‚ç”¨åœºæ™¯ï¼Œè¯·æ ¹æ®å®é™…æƒ…å†µé€‰æ‹©ã€‚

## ğŸ¯ æ–¹æ¡ˆå¯¹æ¯”

| æ–¹æ¡ˆ | éš¾åº¦ | æˆåŠŸç‡ | æ¨èåº¦ | é€‚ç”¨åœºæ™¯ |
|------|------|--------|--------|----------|
| GitHub Actions | â­â­ | ğŸŸ¢ 95% | ğŸ† æœ€æ¨è | æœ‰GitHubè´¦å·ï¼Œç½‘ç»œæ­£å¸¸ |
| è·¨å¹³å°æ„å»ºå™¨ | â­ | ğŸŸ¢ 90% | ğŸ¥ˆ æ¨è | æƒ³è¦å›¾å½¢åŒ–æ“ä½œ |
| Dockeræ„å»º | â­â­â­ | ğŸŸ¡ 70% | ğŸ¥‰ å¤‡é€‰ | ç†Ÿæ‚‰Dockerï¼Œæœ‰æŠ€æœ¯åŸºç¡€ |
| æ‰‹åŠ¨Windowsæ„å»º | â­â­ | ğŸŸ¢ 95% | ğŸ“‹ ä¼ ç»Ÿ | æœ‰Windowsç”µè„‘/è™šæ‹Ÿæœº |
| åœ¨çº¿æ„å»ºæœåŠ¡ | â­â­â­ | ğŸŸ¡ 80% | ğŸ’¡ å¤‡é€‰ | ä¼ä¸šç”¨æˆ·ï¼Œéœ€è¦å®šåˆ¶ |

## ğŸ† æ–¹æ¡ˆ1ï¼šGitHub Actionsï¼ˆæœ€æ¨èï¼‰

### ä¼˜ç‚¹
- âœ… å®Œå…¨å…è´¹
- âœ… è‡ªåŠ¨åŒ–æ„å»º
- âœ… æ”¯æŒå¤šç§è§¦å‘æ–¹å¼
- âœ… æ„å»ºç¯å¢ƒæ ‡å‡†åŒ–
- âœ… å¯ä»¥æ„å»ºå¤šå¹³å°ç‰ˆæœ¬

### ä½¿ç”¨æ­¥éª¤

#### 1. å‡†å¤‡GitHubä»“åº“
```bash
# å¦‚æœè¿˜æ²¡æœ‰Gitä»“åº“
git init
git add .
git commit -m "Add ID card OCR tool"

# åœ¨GitHubä¸Šåˆ›å»ºä»“åº“å
git remote add origin https://github.com/ä½ çš„ç”¨æˆ·å/idcard.git
git branch -M main
git push -u origin main
```

#### 2. è§¦å‘è‡ªåŠ¨æ„å»º
- æ¨é€ä»£ç åˆ°GitHub
- è®¿é—®ä»“åº“çš„ Actions æ ‡ç­¾é¡µ
- æŸ¥çœ‹ "Build Windows EXE" å·¥ä½œæµ
- ç­‰å¾…æ„å»ºå®Œæˆï¼ˆçº¦5-10åˆ†é’Ÿï¼‰

#### 3. ä¸‹è½½æ„å»ºç»“æœ
- åœ¨ Actions é¡µé¢æ‰¾åˆ°æˆåŠŸçš„æ„å»º
- ç‚¹å‡»ä¸‹è½½ `windows-executable` å‹ç¼©åŒ…
- è§£å‹è·å¾—Windows EXEæ–‡ä»¶

### è‡ªå®šä¹‰æ„å»º
ç¼–è¾‘ `.github/workflows/build-windows.yml` å¯ä»¥ï¼š
- ä¿®æ”¹Pythonç‰ˆæœ¬
- æ·»åŠ æ›´å¤šä¾èµ–
- æ”¹å˜æ„å»ºå‚æ•°
- æ·»åŠ æµ‹è¯•æ­¥éª¤

## ğŸ–¥ï¸ æ–¹æ¡ˆ2ï¼šè·¨å¹³å°æ„å»ºå™¨

### ä½¿ç”¨æ–¹æ³•
```bash
python3 build-cross-platform.py
```

### åŠŸèƒ½ç‰¹ç‚¹
- ğŸ¯ äº¤äº’å¼èœå•é€‰æ‹©
- ğŸ“‹ è¯¦ç»†çš„æ“ä½œæŒ‡å¯¼
- ğŸ”§ è‡ªåŠ¨ç¯å¢ƒæ£€æŸ¥
- ğŸ“¦ å¤šç§æ„å»ºæ–¹æ¡ˆé›†æˆ

### èœå•é€‰é¡¹è¯´æ˜
1. **å½“å‰å¹³å°æ„å»º** - ç”ŸæˆmacOSç‰ˆæœ¬
2. **GitHub Actionsæ„å»º** - æŒ‡å¯¼è®¾ç½®GitHubè‡ªåŠ¨æ„å»º
3. **Dockeræ„å»º** - ä½¿ç”¨Dockerå®¹å™¨æ„å»º
4. **åœ¨çº¿æ„å»ºæœåŠ¡** - ä»‹ç»å…¶ä»–CI/CDå¹³å°
5. **Windowsæ‰‹åŠ¨æ„å»º** - æ˜¾ç¤ºWindowsç¯å¢ƒæ„å»ºæ­¥éª¤

## ğŸ³ æ–¹æ¡ˆ3ï¼šDockeræ„å»º

### å‰ç½®è¦æ±‚
- å®‰è£…Docker Desktop
- ç¡®ä¿Dockeræ­£åœ¨è¿è¡Œ

### ä½¿ç”¨æ–¹æ³•
```bash
# æ–¹æ³•1ï¼šä½¿ç”¨è„šæœ¬
./build-docker.sh

# æ–¹æ³•2ï¼šæ‰‹åŠ¨Dockerå‘½ä»¤
docker build -f Dockerfile.windows -t idcard-builder:windows .
docker run --rm \
    -v "$(pwd)/dist-windows:/app/dist" \
    -v "$(pwd)/release-windows:/app/release" \
    idcard-builder:windows
```

### æ³¨æ„äº‹é¡¹
- Docker Windowså®¹å™¨åœ¨macOSä¸Šå¯èƒ½æœ‰å…¼å®¹æ€§é—®é¢˜
- éœ€è¦å¤§é‡ç£ç›˜ç©ºé—´ï¼ˆçº¦5-10GBï¼‰
- é¦–æ¬¡æ„å»ºæ—¶é—´è¾ƒé•¿ï¼ˆ30åˆ†é’Ÿä»¥ä¸Šï¼‰

## ğŸ’» æ–¹æ¡ˆ4ï¼šWindowsç¯å¢ƒæ‰‹åŠ¨æ„å»º

### å‡†å¤‡å·¥ä½œ
1. **Windowsç”µè„‘/è™šæ‹Ÿæœº**
   - Windows 10/11ç³»ç»Ÿ
   - è‡³å°‘4GBå†…å­˜ï¼Œ10GBå¯ç”¨ç©ºé—´

2. **å®‰è£…Python**
   ```bash
   # ä¸‹è½½Python 3.9.x from python.org
   # å®‰è£…æ—¶å‹¾é€‰"Add Python to PATH"
   python --version  # éªŒè¯å®‰è£…
   ```

3. **å®‰è£…Tesseract OCR**
   ```bash
   # ä¸‹è½½ï¼šhttps://github.com/UB-Mannheim/tesseract/wiki
   # å®‰è£…åˆ°é»˜è®¤è·¯å¾„ï¼šC:\Program Files\Tesseract-OCR\
   # ä¸‹è½½ä¸­æ–‡è¯­è¨€åŒ…åˆ°tessdataç›®å½•
   ```

### æ„å»ºæ­¥éª¤
```bash
# 1. å¤åˆ¶é¡¹ç›®æ–‡ä»¶åˆ°Windowsç³»ç»Ÿ
# 2. å®‰è£…ä¾èµ–
pip install -r requirements.txt

# 3. è¿è¡Œæ„å»º
python build.py

# 4. è·å–ç»“æœ
# dist/èº«ä»½è¯ä¿¡æ¯æå–å·¥å…·.exe
# release/ (å®Œæ•´å‘å¸ƒåŒ…)
```

## â˜ï¸ æ–¹æ¡ˆ5ï¼šåœ¨çº¿æ„å»ºæœåŠ¡

### GitLab CI/CD
```yaml
# .gitlab-ci.yml
build-windows:
  stage: build
  image: mcr.microsoft.com/windows/servercore:ltsc2022
  script:
    - python build.py
  artifacts:
    paths:
      - dist/
    expire_in: 1 week
```

### Azure DevOps
- åˆ›å»ºAzure DevOpsé¡¹ç›®
- ä½¿ç”¨Windowsä»£ç†
- é…ç½®æ„å»ºç®¡é“

### AppVeyor
- ä¸“ä¸ºWindowsåº”ç”¨è®¾è®¡
- å¯¹å¼€æºé¡¹ç›®å…è´¹
- é…ç½®appveyor.ymlæ–‡ä»¶

## ğŸ› ï¸ æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

#### 1. GitHub Actionsæ„å»ºå¤±è´¥
**é—®é¢˜**: Actionsæ˜¾ç¤ºçº¢è‰²å¤±è´¥çŠ¶æ€
**è§£å†³**: 
- æ£€æŸ¥`.github/workflows/build-windows.yml`è¯­æ³•
- æŸ¥çœ‹Actionsæ—¥å¿—æ‰¾åˆ°å…·ä½“é”™è¯¯
- ç¡®ä¿requirements.txtæ–‡ä»¶å­˜åœ¨

#### 2. Dockeræ„å»ºå¤±è´¥
**é—®é¢˜**: Windowså®¹å™¨æ— æ³•å¯åŠ¨
**è§£å†³**:
- åˆ‡æ¢Dockeråˆ°Windowså®¹å™¨æ¨¡å¼
- å¢åŠ Dockerå†…å­˜åˆ†é…
- ä½¿ç”¨GitHub Actionsæ›¿ä»£

#### 3. Tesseractæœªæ‰¾åˆ°
**é—®é¢˜**: pytesseractæŠ¥é”™æ‰¾ä¸åˆ°tesseractå‘½ä»¤
**è§£å†³**:
```python
# åœ¨ä»£ç ä¸­æŒ‡å®šè·¯å¾„
pytesseract.pytesseract.tesseract_cmd = r'C:\Program Files\Tesseract-OCR\tesseract.exe'
```

#### 4. ä¾èµ–å®‰è£…å¤±è´¥
**é—®é¢˜**: pip installæŠ¥é”™
**è§£å†³**:
- å‡çº§pip: `python -m pip install --upgrade pip`
- ä½¿ç”¨å›½å†…é•œåƒ: `pip install -i https://pypi.tuna.tsinghua.edu.cn/simple -r requirements.txt`
- åˆ†åˆ«å®‰è£…ä¾èµ–åŒ…

### æ€§èƒ½ä¼˜åŒ–

#### å‡å°EXEæ–‡ä»¶å¤§å°
```python
# åœ¨build.pyä¸­æ·»åŠ æ’é™¤é€‰é¡¹
'--exclude-module=matplotlib',
'--exclude-module=scipy',
'--exclude-module=pandas',
```

#### åŠ å¿«æ„å»ºé€Ÿåº¦
- ä½¿ç”¨ç¼“å­˜çš„Dockeré•œåƒ
- åœ¨GitHub Actionsä¸­å¯ç”¨ä¾èµ–ç¼“å­˜
- é€‰æ‹©è¾ƒæ–°çš„Pythonç‰ˆæœ¬

## ğŸ“Š æ„å»ºç»“æœè¯´æ˜

### æ–‡ä»¶ç»“æ„
```
dist/
â”œâ”€â”€ èº«ä»½è¯ä¿¡æ¯æå–å·¥å…·.exe    # Windowså¯æ‰§è¡Œæ–‡ä»¶ (çº¦50MB)

release/
â”œâ”€â”€ èº«ä»½è¯ä¿¡æ¯æå–å·¥å…·.exe    # å¯æ‰§è¡Œæ–‡ä»¶å‰¯æœ¬
â”œâ”€â”€ ä½¿ç”¨è¯´æ˜.txt              # ä½¿ç”¨è¯´æ˜æ–‡æ¡£
â””â”€â”€ ç¤ºä¾‹å›¾ç‰‡/                 # ç¤ºä¾‹æ–‡ä»¶å¤¹
    â””â”€â”€ è¯·å°†èº«ä»½è¯å›¾ç‰‡æ”¾åœ¨è¿™é‡Œ.txt
```

### åˆ†å‘å»ºè®®
1. **æœ€å°åˆ†å‘åŒ…**: åªåŒ…å«exeæ–‡ä»¶
2. **å®Œæ•´åˆ†å‘åŒ…**: åŒ…å«releaseç›®å½•çš„æ‰€æœ‰å†…å®¹
3. **å®‰è£…åŒ…**: å¯è€ƒè™‘ä½¿ç”¨NSISåˆ¶ä½œå®‰è£…ç¨‹åº

## ğŸ”— ç›¸å…³é“¾æ¥

- [GitHub Actionsæ–‡æ¡£](https://docs.github.com/en/actions)
- [Dockerå®˜æ–¹æ–‡æ¡£](https://docs.docker.com/)
- [PyInstalleræ–‡æ¡£](https://pyinstaller.readthedocs.io/)
- [Tesseract OCR](https://github.com/tesseract-ocr/tesseract)

## ğŸ’¡ æ¨èå·¥ä½œæµ

1. **å¼€å‘é˜¶æ®µ**: ä½¿ç”¨å½“å‰å¹³å°æ„å»ºï¼ˆmacOSï¼‰è¿›è¡Œå¼€å‘æµ‹è¯•
2. **å‘å¸ƒå‡†å¤‡**: ä½¿ç”¨GitHub Actionsæ„å»ºWindowsç‰ˆæœ¬
3. **è´¨é‡ä¿è¯**: åœ¨Windowsç¯å¢ƒæµ‹è¯•ç”Ÿæˆçš„EXEæ–‡ä»¶
4. **æœ€ç»ˆå‘å¸ƒ**: é€šè¿‡GitHub Releaseså‘å¸ƒå¤šå¹³å°ç‰ˆæœ¬

è¿™æ ·æ—¢ä¿è¯äº†å¼€å‘æ•ˆç‡ï¼Œåˆç¡®ä¿äº†æœ€ç»ˆäº§å“çš„è´¨é‡ã€‚